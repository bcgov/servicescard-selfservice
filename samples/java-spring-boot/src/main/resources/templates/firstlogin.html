<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/head :: common_header(~{::title})">
	<title th:text="${client.getClientName()}"></title>
</head>

<body>
	<div th:replace="fragments/header :: header">...</div>
	<div class="main-container">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="alert alert-info alert-dismissible show" role="alert">  
					    <strong>Demo notes:</strong> The user is logged in. They are now on your site and your branding would be displayed. If you need more information than provided by BC Services Card, you'd ask additional questions to the user to complete enrollment.
					    	<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					    <span aria-hidden="true">x</span>
					    </button>
					</div>
					<h1>Complete Your Enrollment</h1>
					<div>Name of Individual Logged In</div>
					<div style="margin-bottom:20px;"><b><span th:text="${#authentication.principal.attributes[display_name]}"></span></b></div>
					<div style="background: #e9ecef; padding: 10px 0px;">
						<a class="toggleHeader" id="UserInfoHeader" href="#" data-toggle="collapse" data-target="#UserInfo" aria-expanded="false" aria-controls="UserInfo">
							<i class="fa fa-fw fa-plus"></i><span th:text="${#authentication.principal.attributes.size()}"></span> attributes provided from their BC Services Card
						</a>
						<div class="collapse hide" id="UserInfo">
							<table class="table table-striped table-sm">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Value</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="attr : ${#authentication.principal.attributes}">
										<td><span th:text="${attr.key}"></span></td>
										<td><span th:text="${attr.value}"></span></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
                    <br>
					<div style="background: #e9ecef; padding: 10px 0px;">
                    	<span style="background-color:#e9ecef">Your additional questions to the user would be here...</span>
                    </div>
                    <br>
            	</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<a th:href="@{'/secure/' + ${client.getRegistrationId()} + '/register'}" class="btn btn-primary">Complete account set up</a>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="fragments/footer :: footer">...</div>
</body>
<script th:src="@{/resources/js/toggleHeader.js}"></script>

</html>